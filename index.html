<!DOCTYPE html>
<html>
  <head>
    <title>Substance</title>

    #####styles#####

    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'/>

    <!-- Templates -->
    <script type="text/html" name="substance">
      <!-- Substance Main Menu -->
      <div id="menu">
        <div class="views">
          <a href="#" class="toggle-view document"><i class="icon-th"></i></a>
          <a href="#tests" class="toggle-view testsuite" ><i class="icon-tasks"></i></a>
        </div>

        <div class="actions">
        </div>
      </div>

      <div id="container">

      </div>

      <!-- Temporary Canvas for image manipulation -->
      <canvas id="canvas" style="display: none;"></canvas>
    </script>

    <!-- Collection View -->
    <script type="text/x-ejs-template" name="collection">
      <% _.each(documents, function(doc) { %>
        <a class="document" href="#<%= doc.id %>">
          <div class="title">
            <%= doc.title %>
          </div>
        </a>
      <% }) %>
    </script>

    <!-- Library -->
    <script type="text/x-ejs-template" name="library">
      <div class="navigation">
        <p>You are looking at a demo of the new <a href="http://github.com/substance/substance">Substance</a> platform.</p>
        <div class="label">Testdrive the editor</div>
        <div class="explanation">
          You can either select a document on the right or import an external document. You can import every markup supported by <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a>.
        </div>
        <input type="text" name="import_url" id="import_url" value="https://raw.github.com/michael/documents/master/2012-06-30-substance.md"/>
        <a class="import-document" sbs-click="importDocument()" href="#import">Import</a>

        <div class="label">Install locally</div>
        <p>
          Clone Substance locally and play around with the code.
        </p>
        <pre><code>
$ git clone https://github.com/substance/substance
$ cd substance
$ npm install
$ npm start
        </code></pre>

      </div>

      <!-- this is where the doc list gets rendered -->
      <div class="collection"></div>
    </script>

    <!-- Editor -->
    <script type="text/x-ejs-template" name="editor">
      <div class="document-settings shelf">
        <div class="annotation-toggles">
          <div class="styles">
            <a href="#" class="annotation-toggle emphasis" sbs-click="annotate(emphasis)"><i class="icon-italic"></i></a>
            <a href="#" class="annotation-toggle strong" sbs-click="annotate(strong)"><i class="icon-bold"></i></a>
            <a href="#" class="annotation-toggle link" sbs-click="addLink()"><i class="icon-link"></i></a>
            <a href="#" class="annotation-toggle code" sbs-click="annotate(code)"><i class="icon-code"></i></a>
          </div>

          <div class="markers">
            <a href="#" class="annotation-toggle idea" sbs-click="annotate(idea)"><i class="icon-lightbulb"></i></a>
            <a href="#" class="annotation-toggle question" sbs-click="annotate(question)"><i class="icon-question-sign"></i></a>
            <a href="#" class="annotation-toggle error" sbs-click="annotate(error)"><i class="icon-exclamation-sign"></i></a>
          </div>

          <form name="link_submission_form" id="link_submission_form">
            <input type="text" id="link_url" value="http://www.aon.at"/>
          </form>
        </div>

        <div class="node-toggles">
          <div class="label"></div>
          <a href="#" class="insert-node paragraph" sbs-click="insertNode(paragraph)"><i class="icon-align-left"></i></a>
          <a href="#" class="insert-node heading" sbs-click="insertNode(heading)"><i class="icon-h-sign"></i></a>
          <a href="#" class="insert-node image" sbs-click="insertImage()"><i class="icon-picture"></i></a>
          <a href="#" class="insert-node codeblock" sbs-click="insertNode(codeblock)"><i class="icon-code"></i></a>
          <!--<a href="#" class="insert-node blockquote" sbs-click="insertNode(blockquote)"><i class="icon-quote-left"></i></a>-->
        </div>
        <a class="show-data" href="#" sbs-click="toggleSource()"><i class="icon-code"></i> Source</a>
      </div>

      <div id="document_wrapper">
        <div id="composer">
          <div id="document">
            <textarea class="source"></textarea>
            <div class="surface">

            </div>
          </div>
        </div>
      </div>
    </script>


    <script src="lib/underscore.js"></script>
    <script src="lib/jquery-2.0.3.min.js"></script>
    <script src="lib/backbone.js"></script>
    <script src="lib/base64.js"></script>
    <script src="lib/jquery.timeago.js"></script>

    #####scripts#####

    <script>

      if (window.Substance === undefined) {
        window.Substance = require("/src/substance.js");
      }

      // Create a new Substance app instance
      // --------
      //
      // injects itself into body when started

      var app = new Substance();

      $(function() {
        app.start();
      });

    </script>
  </head>
  <body>

  </body>
</html>
